<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie Slayer - Sui Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(0, 255, 136, 0.3);
            animation: fadeInDown 0.6s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .header h1 {
            font-size: 3.5em;
            color: #00ff88;
            text-shadow: 0 0 30px #00ff88, 0 0 60px rgba(0, 255, 136, 0.5);
            margin-bottom: 10px;
            letter-spacing: 3px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                text-shadow: 0 0 20px #00ff88, 0 0 40px rgba(0, 255, 136, 0.5);
            }
            50% {
                text-shadow: 0 0 40px #00ff88, 0 0 80px rgba(0, 255, 136, 0.8);
            }
        }

        .header p {
            font-size: 1.3em;
            color: #aaa;
            margin-top: 10px;
        }

        .wallet-section {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-out 0.2s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .wallet-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .wallet-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 255, 136, 0.3);
            padding: 20px 35px;
            color: white;
            font-size: 15px;
            font-weight: bold;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .wallet-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(0, 255, 136, 0.2);
            transition: width 0.6s, height 0.6s, top 0.6s, left 0.6s;
        }

        .wallet-btn:hover::before {
            width: 300px;
            height: 300px;
            top: -150px;
            left: -150px;
        }

        .wallet-btn:hover {
            background: rgba(0, 255, 136, 0.15);
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0, 255, 136, 0.5);
            border-color: #00ff88;
        }

        .wallet-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            position: relative;
            z-index: 1;
        }

        .wallet-info {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05));
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1em;
            border: 2px solid #00ff88;
            box-shadow: 0 5px 25px rgba(0, 255, 136, 0.3);
            animation: slideInUp 0.5s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 18px 40px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            border-radius: 35px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px;
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 35px rgba(102, 126, 234, 0.7);
        }

        .btn:active:not(:disabled) {
            transform: translateY(-2px) scale(0.98);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
            box-shadow: 0 6px 25px rgba(255, 107, 107, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            box-shadow: 0 6px 25px rgba(79, 172, 254, 0.5);
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 25px;
            animation: fadeIn 0.8s ease-out 0.4s both;
        }

        @media (max-width: 1024px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 255, 136, 0.2);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .panel h2 {
            color: #00ff88;
            margin-bottom: 25px;
            font-size: 2em;
            border-bottom: 3px solid #00ff88;
            padding-bottom: 12px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .stat-item:hover {
            background: rgba(0, 255, 136, 0.15);
            transform: translateX(8px);
            border-left-color: #00ff88;
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.3);
        }

        .stat-label {
            color: #aaa;
            font-weight: 600;
            font-size: 1.05em;
        }

        .stat-value {
            color: #00ff88;
            font-weight: bold;
            font-size: 1.2em;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .health-bar {
            width: 100%;
            height: 35px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 18px;
            overflow: hidden;
            margin: 18px 0;
            border: 3px solid #00ff88;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 255, 136, 0.3);
            position: relative;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88 0%, #00cc70 50%, #00ff88 100%);
            background-size: 200% 100%;
            animation: healthShimmer 3s ease-in-out infinite;
            transition: width 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1em;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
            position: relative;
            overflow: hidden;
        }

        .health-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: healthGloss 2s ease-in-out infinite;
        }

        @keyframes healthShimmer {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes healthGloss {
            0% {
                left: -100%;
            }
            100% {
                left: 200%;
            }
        }

        /* BATTLE ARENA - Style Pok√©mon */
        .canvas-container {
            position: relative;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 50%, #6B8E23 100%);
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid #00ff88;
            min-height: 500px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
        }

        .battle-ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to bottom, rgba(139, 69, 19, 0.3), rgba(101, 67, 33, 0.6));
            border-top: 4px solid #8B4513;
        }

        .battle-grid {
            position: absolute;
            bottom: 10%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, #654321 50%, transparent 100%);
        }

        .fighter {
            position: absolute;
            transition: all 0.3s ease;
            filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.6));
        }

        .hero-fighter {
            bottom: 18%;
            left: 15%;
            width: 130px;
            height: 130px;
        }

        .zombie-fighter {
            top: 20%;
            right: 18%;
            width: 150px;
            height: 150px;
        }

        .fighter-sprite {
            width: 100%;
            height: 100%;
            font-size: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Animations de combat */
        @keyframes attackSlide {
            0% { transform: translateX(0) scale(1); }
            50% { transform: translateX(220px) scale(1.25) rotate(15deg); }
            100% { transform: translateX(0) scale(1) rotate(0deg); }
        }

        @keyframes attackSlideEnemy {
            0% { transform: translateX(0) scale(1); }
            50% { transform: translateX(-220px) scale(1.25) rotate(-15deg); }
            100% { transform: translateX(0) scale(1) rotate(0deg); }
        }

        @keyframes hit {
            0%, 100% { 
                transform: translateX(0);
                filter: brightness(1) drop-shadow(0 8px 15px rgba(0, 0, 0, 0.6));
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-15px);
                filter: brightness(2.5) drop-shadow(0 0 30px #fff) hue-rotate(180deg);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(15px);
                filter: brightness(2.5) drop-shadow(0 0 30px #fff) hue-rotate(180deg);
            }
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg); 
            }
            50% { 
                transform: translateY(-15px) rotate(5deg); 
            }
        }

        @keyframes victory {
            0%, 100% {
                transform: scale(1) rotate(0deg);
            }
            25% {
                transform: scale(1.2) rotate(-10deg);
            }
            75% {
                transform: scale(1.2) rotate(10deg);
            }
        }

        @keyframes defeat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translateY(-30px) rotate(180deg);
                opacity: 0.5;
            }
            100% {
                transform: translateY(500px) rotate(720deg);
                opacity: 0;
            }
        }

        .fighter.attacking {
            animation: attackSlide 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .zombie-fighter.attacking {
            animation: attackSlideEnemy 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .fighter.hit {
            animation: hit 0.6s ease-in-out;
        }

        .fighter.idle {
            animation: float 2.5s ease-in-out infinite;
        }

        .fighter.victory {
            animation: victory 1s ease-in-out 3;
        }

        .fighter.defeat {
            animation: defeat 1.5s ease-in-out forwards;
        }

        /* Effets d'attaque */
        .attack-effect {
            position: absolute;
            font-size: 80px;
            animation: attackEffect 0.7s ease-out forwards;
            pointer-events: none;
            z-index: 100;
        }

        @keyframes attackEffect {
            0% {
                opacity: 1;
                transform: scale(0.3) rotate(0deg);
                filter: brightness(2);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(2.5) rotate(360deg);
                filter: brightness(0.5);
            }
        }

        .damage-number {
            position: absolute;
            font-size: 45px;
            font-weight: 900;
            color: #ff4444;
            text-shadow: 4px 4px 8px #000, -3px -3px 6px #fff, 0 0 20px #ff0000;
            animation: damageFloat 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            pointer-events: none;
            z-index: 101;
        }

        @keyframes damageFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.4) rotate(-10deg);
            }
            30% {
                transform: translateY(-40px) scale(1.4) rotate(5deg);
            }
            60% {
                opacity: 1;
                transform: translateY(-80px) scale(1.2) rotate(-5deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-150px) scale(0.6) rotate(10deg);
            }
        }

        .heal-effect {
            position: absolute;
            font-size: 45px;
            font-weight: 900;
            color: #00ff88;
            text-shadow: 4px 4px 8px #000, -3px -3px 6px #fff, 0 0 20px #00ff88;
            animation: healFloat 1.4s ease-out forwards;
            pointer-events: none;
            z-index: 101;
        }

        @keyframes healFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.4);
            }
            50% {
                transform: translateY(-60px) scale(1.3);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0.5);
            }
        }

        /* Particules */
        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        .log-area {
            max-height: 350px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
            font-size: 0.95em;
            border: 2px solid rgba(0, 255, 136, 0.3);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .log-entry {
            margin: 10px 0;
            padding: 12px;
            border-left: 4px solid #00ff88;
            padding-left: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            animation: slideInLeft 0.4s ease-out;
            transition: all 0.3s ease;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .log-entry:hover {
            background: rgba(0, 255, 136, 0.1);
            transform: translateX(5px);
        }

        .log-error {
            border-left-color: #ff6b6b;
            color: #ff6b6b;
        }

        .log-success {
            border-left-color: #00ff88;
            color: #00ff88;
        }

        .log-info {
            border-left-color: #4facfe;
            color: #4facfe;
        }

        .zombie-list {
            max-height: 450px;
            overflow-y: auto;
        }

        .zombie-item {
            background: linear-gradient(135deg, rgba(255, 100, 100, 0.15), rgba(255, 50, 50, 0.1));
            padding: 20px;
            margin: 12px 0;
            border-radius: 15px;
            border: 2px solid #ff6b6b;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .zombie-item::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.3);
            transition: width 0.6s, height 0.6s, top 0.6s, left 0.6s;
        }

        .zombie-item:hover::before {
            width: 400px;
            height: 400px;
            top: -200px;
            left: -200px;
        }

        .zombie-item:hover {
            transform: translateX(15px) scale(1.05);
            background: rgba(255, 100, 100, 0.3);
            box-shadow: 0 10px 40px rgba(255, 107, 107, 0.6);
            border-color: #ff4444;
        }

        .zombie-type {
            font-weight: bold;
            color: #ff6b6b;
            font-size: 1.4em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
            position: relative;
            z-index: 1;
        }

        .instructions {
            background: linear-gradient(135deg, rgba(74, 172, 254, 0.15), rgba(74, 172, 254, 0.05));
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #4facfe;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 5px 25px rgba(74, 172, 254, 0.3);
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00ff88, #00cc70);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00cc70, #00ff88);
        }

        .loading {
            color: #4facfe;
            font-style: italic;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/008aa0dc-8fe2-4471-ab66-e4262a4528a8.png" alt="Zombie Slayer Logo">
            </div>
            <h1>üßü ZOMBIE SLAYER üó°Ô∏è</h1>
            <p style="font-size: 1.3em; margin-top: 10px;">Combat √âpique sur la Blockchain Sui</p>
        </div>

        <div class="wallet-section">
            <p class="loading" id="loadingText">üîç Recherche des wallets Sui...</p>
            <div id="walletSelector" class="wallet-selector"></div>
            <div class="wallet-info hidden" id="walletInfo"></div>
        </div>

        <div id="gameInterface" class="hidden">
            <div class="game-area">
                <!-- Panneau Joueur -->
                <div class="panel">
                    <h2>üë§ Ton H√©ros</h2>
                    <div id="playerStats">
                        <div class="stat-item">
                            <span class="stat-label">Nom:</span>
                            <span class="stat-value" id="playerName">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Level:</span>
                            <span class="stat-value" id="playerLevel">-</span>
                        </div>
                        <div>
                            <div class="stat-label" style="margin-bottom: 8px;">‚ù§Ô∏è Sant√©:</div>
                            <div class="health-bar">
                                <div class="health-fill" id="playerHealth" style="width: 100%;">
                                    <span id="playerHealthText">100/100</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">‚öîÔ∏è Attaque:</span>
                            <span class="stat-value" id="playerAttack">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">üõ°Ô∏è D√©fense:</span>
                            <span class="stat-value" id="playerDefense">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">‚≠ê XP:</span>
                            <span class="stat-value" id="playerXP">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">üí∞ Pi√®ces:</span>
                            <span class="stat-value" id="playerCoins">-</span>
                        </div>
                    </div>
                    <button class="btn btn-success" id="createPlayer">‚ú® Cr√©er H√©ros</button>
                    <button class="btn" id="healPlayer" disabled>ü©π Soigner (10üí∞)</button>
                </div>

                <!-- Zone de Combat -->
                <div class="panel">
                    <h2>‚öîÔ∏è Ar√®ne de Combat</h2>
                    <div class="canvas-container" id="battleArena">
                        <div class="battle-ground"></div>
                        <div class="battle-grid"></div>
                        
                        <div class="fighter hero-fighter idle" id="heroFighter">
                            <div class="fighter-sprite">üó°Ô∏è</div>
                        </div>
                        
                        <div class="fighter zombie-fighter idle" id="zombieFighter" style="display: none;">
                            <div class="fighter-sprite">üßü</div>
                        </div>
                        
                        <div style="padding: 60px; text-align: center;" id="emptyBattle">
                            <p style="font-size: 4em; margin-bottom: 20px;">üó°Ô∏è</p>
                            <p style="font-size: 1.3em; color: #aaa;">En attente d'un adversaire...</p>
                            <p style="font-size: 1em; color: #666; margin-top: 10px;">Spawne un zombie pour commencer!</p>
                        </div>
                    </div>
                    <div class="instructions">
                        <p style="font-size: 1.1em; font-weight: bold; margin-bottom: 10px;">üìã Guide de Combat</p>
                        <p style="color: #aaa;">1. Cr√©e ton h√©ros ‚öîÔ∏è | 2. Spawne un zombie üßü | 3. Clique pour attaquer! üí•</p>
                    </div>
                    <div class="log-area" id="gameLog">
                        <div class="log-entry log-success">‚úÖ Bienvenue dans l'ar√®ne, champion !</div>
                        <div class="log-entry log-info">üîó Connecte ton wallet Sui pour commencer l'aventure...</div>
                    </div>
                </div>

                <!-- Panneau Zombies -->
                <div class="panel">
                    <h2>üßü Spawn Zombies</h2>
                    <button class="btn btn-danger" id="spawnNormal" disabled>
                        üßü Zombie Normal<br>
                        <small style="font-size: 0.8em;">‚ù§Ô∏è 50 HP | ‚≠ê 25 XP</small>
                    </button>
                    <button class="btn btn-danger" id="spawnStrong" disabled>
                        üßü‚Äç‚ôÇÔ∏è Zombie Fort<br>
                        <small style="font-size: 0.8em;">‚ù§Ô∏è 100 HP | ‚≠ê 50 XP</small>
                    </button>
                    <button class="btn btn-danger" id="spawnBoss" disabled>
                        üëπ Boss Zombie<br>
                        <small style="font-size: 0.8em;">‚ù§Ô∏è 200 HP | ‚≠ê 150 XP</small>
                    </button>
                    
                    <div class="zombie-list" id="zombieList">
                        <p style="text-align: center; color: #888; padding: 30px;">
                            üåô La nuit est calme...<br><br>
                            Spawne des zombies pour<br>commencer le combat !
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { SuiClient, getFullnodeUrl } from 'https://esm.sh/@mysten/sui@1.15.0/client';
        import { Transaction } from 'https://esm.sh/@mysten/sui@1.15.0/transactions';

        const PACKAGE_ID = '0xd0ed8178bb15ab8bea93f74130639417fea3b8851f4adacf1262bde485a534d8';
        const NETWORK = 'testnet';
        
        let suiClient = new SuiClient({ url: getFullnodeUrl(NETWORK) });
        let currentWallet = null;
        let currentAccount = null;
        let playerObjectId = null;
        let zombieObjects = [];
        let currentZombieInBattle = null;

        const walletSelector = document.getElementById('walletSelector');
        const walletInfo = document.getElementById('walletInfo');
        const gameInterface = document.getElementById('gameInterface');
        const gameLog = document.getElementById('gameLog');
        const loadingText = document.getElementById('loadingText');
        const battleArena = document.getElementById('battleArena');

        // Effets visuels am√©lior√©s
        function showAttackEffect(x, y, emoji) {
            const effect = document.createElement('div');
            effect.className = 'attack-effect';
            effect.textContent = emoji;
            effect.style.left = x;
            effect.style.top = y;
            battleArena.appendChild(effect);
            setTimeout(() => effect.remove(), 700);

            // Particules
            for (let i = 0; i < 8; i++) {
                createParticle(x, y);
            }
        }

        function showDamageNumber(damage, x, y) {
            const dmg = document.createElement('div');
            dmg.className = 'damage-number';
            dmg.textContent = `-${damage}`;
            dmg.style.left = x;
            dmg.style.top = y;
            battleArena.appendChild(dmg);
            setTimeout(() => dmg.remove(), 1400);
        }

        function showHealEffect(amount, x, y) {
            const heal = document.createElement('div');
            heal.className = 'heal-effect';
            heal.textContent = `+${amount}`;
            heal.style.left = x;
            heal.style.top = y;
            battleArena.appendChild(heal);
            setTimeout(() => heal.remove(), 1400);
        }

        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.left = x;
            particle.style.top = y;
            particle.style.width = '8px';
            particle.style.height = '8px';
            particle.style.borderRadius = '50%';
            particle.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '99';
            
            const tx = (Math.random() - 0.5) * 200;
            const ty = (Math.random() - 0.5) * 200;
            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');
            particle.style.animation = 'particleFloat 1s ease-out forwards';
            
            battleArena.appendChild(particle);
            setTimeout(() => particle.remove(), 1000);
        }

        function addLog(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            const icons = { error: '‚ùå', success: '‚úÖ', info: 'üí¨' };
            logEntry.innerHTML = `<strong>[${new Date().toLocaleTimeString()}]</strong> ${icons[type]} ${message}`;
            gameLog.appendChild(logEntry);
            gameLog.scrollTop = gameLog.scrollHeight;
        }

        const GlobalWallet = {
            walletList: [],
            register: (wallet) => {
                console.log('‚úÖ Wallet enregistr√©:', wallet.name);
                GlobalWallet.walletList.push(wallet);
            }
        };

        window.dispatchEvent(new CustomEvent('wallet-standard:app-ready', { detail: GlobalWallet }));

        setTimeout(() => {
            console.log(`üìä Wallets d√©tect√©s: ${GlobalWallet.walletList.length}`);
            displayWalletButtons();
        }, 1500);

        function displayWalletButtons() {
            const wallets = GlobalWallet.walletList;
            loadingText.style.display = 'none';

            if (wallets.length === 0) {
                walletSelector.innerHTML = `
                    <div style="padding: 30px; background: rgba(255, 107, 107, 0.2); border: 3px solid #ff6b6b; border-radius: 20px; max-width: 600px; margin: 0 auto;">
                        <p style="color: #ff6b6b; margin-bottom: 15px; font-size: 1.2em;">‚ùå Aucun wallet Sui d√©tect√©</p>
                        <p style="font-size: 1em; margin-bottom: 10px;">Installe un wallet compatible Sui :</p>
                        <p style="font-size: 1.1em; margin-top: 15px;">
                            <a href="https://phantom.app/" target="_blank" style="color: #00ff88; text-decoration: none; margin: 0 10px;">üü£ Phantom</a> |
                            <a href="https://chromewebstore.google.com/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil" target="_blank" style="color: #00ff88; text-decoration: none; margin: 0 10px;">üîµ Sui Wallet</a> |
                            <a href="https://suiet.app/" target="_blank" style="color: #00ff88; text-decoration: none; margin: 0 10px;">üü† Suiet</a>
                        </p>
                        <p style="font-size: 0.9em; margin-top: 15px; color: #aaa;">Rafra√Æchis la page apr√®s installation</p>
                    </div>
                `;
                return;
            }

            addLog(`${wallets.length} wallet(s) compatible(s) trouv√©(s)!`, 'success');

            wallets.forEach(wallet => {
                const btn = document.createElement('button');
                btn.className = 'wallet-btn';
                btn.innerHTML = `
                    ${wallet.icon ? `<img src="${wallet.icon}" class="wallet-icon" alt="${wallet.name}">` : 'üîó'}
                    <span style="position: relative; z-index: 1;">${wallet.name}</span>
                `;
                btn.onclick = () => connectWallet(wallet);
                walletSelector.appendChild(btn);
            });
        }

        async function connectWallet(wallet) {
            try {
                addLog(`Connexion √† ${wallet.name}...`, 'info');

                const connectFeature = wallet.features['standard:connect'];
                if (!connectFeature) {
                    addLog('Ce wallet ne supporte pas la connexion standard', 'error');
                    return;
                }

                await connectFeature.connect();
                const accounts = wallet.accounts;

                if (!accounts || accounts.length === 0) {
                    addLog('Aucun compte trouv√©', 'error');
                    return;
                }

                currentWallet = wallet;
                currentAccount = accounts[0].address;

                walletInfo.innerHTML = `
                    <strong style="font-size: 1.2em;">‚úÖ ${wallet.name} Connect√©</strong><br>
                    <span style="font-family: monospace; font-size: 1.1em; color: #00ff88;">
                        ${currentAccount.slice(0, 10)}...${currentAccount.slice(-8)}
                    </span>
                `;
                walletInfo.classList.remove('hidden');
                gameInterface.classList.remove('hidden');
                walletSelector.innerHTML = `<button class="btn btn-success" disabled>‚úì ${wallet.name} Connect√©</button>`;

                addLog(`Bienvenue dans l'ar√®ne, champion! üéÆ`, 'success');
                await loadPlayerData();

            } catch (error) {
                console.error('‚ùå Erreur connexion:', error);
                addLog(`Erreur de connexion: ${error.message}`, 'error');
                addLog('Accepte la demande de connexion dans ton wallet', 'info');
            }
        }

        async function signAndExecute(tx) {
            const feature = currentWallet.features['sui:signAndExecuteTransactionBlock'] || 
                           currentWallet.features['sui:signAndExecuteTransaction'];
            
            if (!feature) {
                throw new Error('Wallet ne supporte pas la signature de transactions');
            }

            return await feature.signAndExecuteTransactionBlock({
                transactionBlock: tx,
                account: currentWallet.accounts[0],
                chain: `sui:${NETWORK}`,
                options: { showEffects: true, showEvents: true }
            });
        }

        async function loadPlayerData() {
            try {
                addLog('Recherche de ton h√©ros...', 'info');

                const objects = await suiClient.getOwnedObjects({
                    owner: currentAccount,
                    options: { showContent: true, showType: true }
                });

                const playerObj = objects.data.find(obj =>
                    obj.data?.type?.includes('::player::Player')
                );

                if (playerObj) {
                    playerObjectId = playerObj.data.objectId;
                    updatePlayerUI(playerObj.data.content.fields);
                    addLog('H√©ros charg√© avec succ√®s! ‚öîÔ∏è', 'success');
                    document.getElementById('createPlayer').disabled = true;
                    document.getElementById('healPlayer').disabled = false;
                    enableZombieButtons();
                    await loadZombies();
                } else {
                    addLog('Aucun h√©ros trouv√©. Cr√©e ton champion!', 'info');
                }
            } catch (error) {
                console.error('Erreur chargement:', error);
                addLog('Erreur lors du chargement des donn√©es', 'error');
            }
        }

        document.getElementById('createPlayer').addEventListener('click', async () => {
            const name = prompt('Nom de ton h√©ros l√©gendaire:', 'Hero');
            if (!name) return;

            try {
                addLog(`Cr√©ation de ${name}... ‚ú®`, 'info');

                const tx = new Transaction();
                tx.moveCall({
                    target: `${PACKAGE_ID}::player::create_player`,
                    arguments: [
                        tx.pure.vector('u8', Array.from(new TextEncoder().encode(name)))
                    ]
                });

                const result = await signAndExecute(tx);

                if (result.effects.status.status === 'success') {
                    addLog(`${name} a √©t√© cr√©√© avec succ√®s! üéâ`, 'success');
                    setTimeout(() => loadPlayerData(), 2000);
                } else {
                    addLog('√âchec de la cr√©ation', 'error');
                }
            } catch (error) {
                console.error('Erreur:', error);
                addLog(`Erreur: ${error.message}`, 'error');
            }
        });

        function updatePlayerUI(fields) {
            document.getElementById('playerName').textContent = fields.name || '-';
            document.getElementById('playerLevel').textContent = fields.level || '-';
            document.getElementById('playerAttack').textContent = fields.attack || '-';
            document.getElementById('playerDefense').textContent = fields.defense || '-';
            document.getElementById('playerXP').textContent = fields.experience || '-';
            document.getElementById('playerCoins').textContent = fields.coins || '-';

            const health = parseInt(fields.health) || 0;
            const maxHealth = parseInt(fields.max_health) || 100;
            const healthPercent = (health / maxHealth) * 100;

            document.getElementById('playerHealth').style.width = healthPercent + '%';
            document.getElementById('playerHealthText').textContent = `${health}/${maxHealth}`;
        }

        function enableZombieButtons() {
            document.getElementById('spawnNormal').disabled = false;
            document.getElementById('spawnStrong').disabled = false;
            document.getElementById('spawnBoss').disabled = false;
        }

        document.getElementById('spawnNormal').addEventListener('click', () => spawnZombie('normal'));
        document.getElementById('spawnStrong').addEventListener('click', () => spawnZombie('strong'));
        document.getElementById('spawnBoss').addEventListener('click', () => spawnZombie('boss'));

        async function spawnZombie(type) {
            try {
                const names = { normal: 'Normal', strong: 'Fort', boss: 'Boss' };
                addLog(`Invocation d'un zombie ${names[type]}... üåô`, 'info');

                const functionMap = {
                    'normal': 'spawn_normal',
                    'strong': 'spawn_strong',
                    'boss': 'spawn_boss'
                };

                const tx = new Transaction();
                tx.moveCall({
                    target: `${PACKAGE_ID}::zombie::${functionMap[type]}`
                });

                const result = await signAndExecute(tx);

                if (result.effects.status.status === 'success') {
                    addLog(`Zombie ${names[type]} spawn√©! L'obscurit√© grandit... üßü`, 'success');
                    setTimeout(() => loadZombies(), 2000);
                }
            } catch (error) {
                console.error('Erreur spawn:', error);
                addLog(`Erreur: ${error.message}`, 'error');
            }
        }

        async function loadZombies() {
            try {
                const objects = await suiClient.getOwnedObjects({
                    owner: currentAccount,
                    options: { showContent: true, showType: true }
                });

                zombieObjects = objects.data.filter(obj =>
                    obj.data?.type?.includes('::zombie::Zombie')
                );

                updateZombieList();
            } catch (error) {
                console.error('Erreur chargement zombies:', error);
            }
        }

        function updateZombieList() {
            const list = document.getElementById('zombieList');

            if (zombieObjects.length === 0) {
                list.innerHTML = `
                    <p style="text-align: center; color: #888; padding: 30px;">
                        üåô La nuit est calme...<br><br>
                        Spawne des zombies pour<br>commencer le combat !
                    </p>
                `;
                return;
            }

            list.innerHTML = zombieObjects.map(zombie => {
                const fields = zombie.data.content.fields;
                const typeNames = ['', 'üßü Normal', 'üßü‚Äç‚ôÇÔ∏è Fort', 'üëπ Boss'];
                const typeName = typeNames[fields.zombie_type] || 'üßü Inconnu';

                return `
                    <div class="zombie-item" data-zombie-id="${zombie.data.objectId}">
                        <div class="zombie-type">${typeName}</div>
                        <div class="stat-item">
                            <span>‚ù§Ô∏è HP:</span>
                            <span style="color: #ff6b6b;">${fields.health}/${fields.max_health}</span>
                        </div>
                        <div class="stat-item">
                            <span>‚öîÔ∏è ${fields.attack}</span>
                            <span>üõ°Ô∏è ${fields.defense}</span>
                        </div>
                        <div class="stat-item">
                            <span>üéÅ R√©compenses:</span>
                            <span>${fields.xp_reward} XP | ${fields.coin_reward} üí∞</span>
                        </div>
                        <div style="text-align: center; margin-top: 12px; padding: 10px; background: rgba(255,107,107,0.2); border-radius: 8px;">
                            <span style="color: #ff4444; font-weight: bold; font-size: 1.1em;">‚öîÔ∏è COMBATTRE</span>
                        </div>
                    </div>
                `;
            }).join('');

            document.querySelectorAll('.zombie-item').forEach(item => {
                item.addEventListener('click', () => {
                    const zombieId = item.getAttribute('data-zombie-id');
                    attackZombie(zombieId);
                });
            });
        }

        async function attackZombie(zombieId) {
            if (!playerObjectId) {
                addLog('Cr√©e d\'abord un h√©ros!', 'error');
                return;
            }

            // Montrer le zombie dans l'ar√®ne
            document.getElementById('emptyBattle').style.display = 'none';
            document.getElementById('zombieFighter').style.display = 'block';

            try {
                addLog('‚öîÔ∏è Combat √©pique en cours...', 'info');

                // Animation d'attaque du h√©ros
                const hero = document.getElementById('heroFighter');
                hero.classList.remove('idle');
                hero.classList.add('attacking');
                
                setTimeout(() => {
                    showAttackEffect('50%', '40%', 'üí•');
                    showDamageNumber(Math.floor(Math.random() * 30) + 20, '55%', '35%');
                }, 350);

                setTimeout(() => {
                    hero.classList.remove('attacking');
                    hero.classList.add('idle');
                    
                    // Animation du zombie touch√©
                    const zombie = document.getElementById('zombieFighter');
                    zombie.classList.add('hit');
                    
                    setTimeout(() => {
                        zombie.classList.remove('hit');
                    }, 600);
                }, 700);

                const tx = new Transaction();
                tx.moveCall({
                    target: `${PACKAGE_ID}::combat::fight`,
                    arguments: [
                        tx.object(playerObjectId),
                        tx.object(zombieId)
                    ]
                });

                const result = await signAndExecute(tx);

                if (result.effects.status.status === 'success') {
                    const events = result.events || [];
                    const combatEvent = events.find(e => e.type && e.type.includes('CombatFinished'));

                    if (combatEvent) {
                        const data = combatEvent.parsedJson;
                        setTimeout(() => {
                            if (data.player_won) {
                                // Animation de victoire
                                hero.classList.add('victory');
                                document.getElementById('zombieFighter').classList.add('defeat');
                                
                                setTimeout(() => {
                                    hero.classList.remove('victory');
                                    document.getElementById('zombieFighter').style.display = 'none';
                                    document.getElementById('emptyBattle').style.display = 'block';
                                }, 1500);
                                
                                showHealEffect(`+${data.xp_gained} XP`, '20%', '30%');
                                addLog(`üéâ VICTOIRE √âCLATANTE! +${data.xp_gained} XP, +${data.coins_gained} üí∞`, 'success');
                            } else {
                                hero.classList.add('hit');
                                setTimeout(() => hero.classList.remove('hit'), 600);
                                addLog('üíÄ D√©faite... Le zombie √©tait trop puissant', 'error');
                            }
                        }, 1200);
                    }

                    setTimeout(() => {
                        loadPlayerData();
                        loadZombies();
                    }, 2500);
                }
            } catch (error) {
                console.error('Erreur combat:', error);
                addLog(`Erreur de combat: ${error.message}`, 'error');
                document.getElementById('zombieFighter').style.display = 'none';
                document.getElementById('emptyBattle').style.display = 'block';
            }
        }

        document.getElementById('healPlayer').addEventListener('click', async () => {
            try {
                addLog('Soin en cours... ü©π', 'info');

                const tx = new Transaction();
                tx.moveCall({
                    target: `${PACKAGE_ID}::player::heal`,
                    arguments: [
                        tx.object(playerObjectId),
                        tx.pure.u64(50)
                    ]
                });

                const result = await signAndExecute(tx);

                if (result.effects.status.status === 'success') {
                    showHealEffect('+50 HP', '25%', '50%');
                    addLog('ü©π Sant√© restaur√©e! +50 HP', 'success');
                    setTimeout(() => loadPlayerData(), 2000);
                }
            } catch (error) {
                console.error('Erreur soin:', error);
                addLog(`Erreur: ${error.message}`, 'error');
            }
        });

        console.log('üéÆ Zombie Slayer - Charg√© et pr√™t!');
        console.log('‚è≥ D√©tection des wallets en cours...');
    </script>
</body>
</html>
